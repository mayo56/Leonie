"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.resolveIPermissions = exports.resolveIGuilds = void 0;
const tslib_1 = require("tslib");
const lodash_1 = (0, tslib_1.__importDefault)(require("lodash"));
const resolveIGuilds = async (client, command, guilds) => {
    const guildX = await Promise.all(guilds.map((guild) => typeof guild === "function" ? guild(client, command) : guild));
    return lodash_1.default.uniqWith(guildX.flat(1), lodash_1.default.isEqual);
};
exports.resolveIGuilds = resolveIGuilds;
const resolveIPermissions = async (guild, command, permissions) => {
    const permissionX = await Promise.all(permissions.map((resolver) => typeof resolver === "function" ? resolver(guild, command) : resolver));
    const uniqFields = ["id", "type"];
    return lodash_1.default.uniqWith(permissionX.flat(1), (a, b) => lodash_1.default.isEqual(lodash_1.default.pick(a, uniqFields), lodash_1.default.pick(b, uniqFields)));
};
exports.resolveIPermissions = resolveIPermissions;
//# sourceMappingURL=common.js.map