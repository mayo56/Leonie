import { Decorator } from "@discordx/internal";
/**
 * @category Decorator
 */
export class DApplicationCommandOption extends Decorator {
    _autocomplete;
    _channelTypes = undefined;
    _choices = [];
    _description;
    _name;
    _maxValue;
    _minValue;
    _options = [];
    _required = true;
    _type;
    get isNode() {
        return this.type === "SUB_COMMAND" || this.type === "SUB_COMMAND_GROUP";
    }
    get options() {
        return this._options;
    }
    set options(value) {
        this._options = value;
    }
    get channelTypes() {
        return this._channelTypes;
    }
    set channelTypes(value) {
        this._channelTypes = value;
    }
    get name() {
        return this._name;
    }
    set name(value) {
        this._name = value;
    }
    get maxValue() {
        return this._maxValue;
    }
    set maxValue(value) {
        this._maxValue = value;
    }
    get minValue() {
        return this._minValue;
    }
    set minValue(value) {
        this._minValue = value;
    }
    get type() {
        return this._type;
    }
    set type(value) {
        this._type = value;
    }
    get autocomplete() {
        return this._autocomplete;
    }
    set autocomplete(value) {
        this._autocomplete = value;
    }
    get description() {
        return this._description;
    }
    set description(value) {
        this._description = value;
    }
    get required() {
        return this._required;
    }
    set required(value) {
        this._required = value;
    }
    get choices() {
        return this._choices;
    }
    set choices(value) {
        this._choices = value;
    }
    constructor(name, autocomplete, channelType, description, index, maxValue, minValue, required, type) {
        super();
        this._name = name;
        this._autocomplete = autocomplete;
        this._channelTypes = channelType?.sort();
        this._description =
            description ?? `${name} - ${type ?? "STRING"}`.toLowerCase();
        this._index = index;
        this._maxValue = maxValue;
        this._minValue = minValue;
        this._required = required ?? true;
        this._type = type ?? "STRING";
    }
    static create(name, autocomplete, channelType, description, index, maxValue, minValue, required, type) {
        return new DApplicationCommandOption(name, autocomplete, channelType, description, index, maxValue, minValue, required, type);
    }
    toJSON() {
        const options = [...this.options]
            .reverse()
            .map((option) => option.toJSON());
        const data = {
            autocomplete: this.autocomplete ? true : undefined,
            channelTypes: this.channelTypes,
            choices: this.isNode
                ? undefined
                : this.choices.length === 0
                    ? undefined
                    : this.choices.map((choice) => choice.toJSON()),
            description: this.description,
            maxValue: this.maxValue,
            minValue: this.minValue,
            name: this.name,
            options: options.length === 0 ? undefined : options,
            required: this.isNode ? undefined : this.required,
            type: this.type,
        };
        return data;
    }
}
//# sourceMappingURL=DApplicationCommandOption.js.map